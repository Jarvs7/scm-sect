{"ast":null,"code":"var _jsxFileName = \"D:\\\\sistema-chamados\\\\frontend\\\\src\\\\components\\\\Relatorios\\\\RelatorioComponent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useSocket } from \"../../context/SocketContext\";\nimport CardsDashboard from \"./CardsDashboard\";\nimport Filtros from \"./Filtros.tsx\";\nimport Graficos from \"./Graficos\";\nimport TabelaViagens from \"./TabelaViagens\";\nimport ExportarRelatorios from \"./ExportarRelatorios\";\nimport Header from \"./Header.jsx\";\nimport \"../../styles/Relatorio/relatorio.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RelatorioComponent = () => {\n  _s();\n  var _dadosRelatorios$viag;\n  const {\n    dadosRelatorios,\n    loading,\n    socket\n  } = useSocket();\n  const [filtrosAplicados, setFiltrosAplicados] = useState({});\n  const handleFiltrar = filtros => {\n    setFiltrosAplicados(filtros);\n    socket.emit(\"obterRelatorios\", filtros);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center my-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-border text-primary\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Carregando...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-2\",\n        children: \"Carregando relat\\xF3rios...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this);\n  }\n  if (!dadosRelatorios || !dadosRelatorios.estatisticas) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-warning text-center\",\n      children: \"Nenhum dado encontrado com os filtros selecionados\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Filtra viagens por motorista se existir no filtro\n  const viagensFiltradas = ((_dadosRelatorios$viag = dadosRelatorios.viagens) === null || _dadosRelatorios$viag === void 0 ? void 0 : _dadosRelatorios$viag.filter(viagem => {\n    var _viagem$motorista;\n    if (!filtrosAplicados.motorista) return true;\n    return ((_viagem$motorista = viagem.motorista) === null || _viagem$motorista === void 0 ? void 0 : _viagem$motorista._id) === filtrosAplicados.motorista;\n  })) || [];\n\n  // Calcula estatísticas filtradas\n  const estatisticasFiltradas = {\n    ...dadosRelatorios.estatisticas,\n    totalViagens: viagensFiltradas.length,\n    porMotorista: dadosRelatorios.estatisticas.porMotorista.filter(m => {\n      if (!filtrosAplicados.motorista) return true;\n      return m._id === filtrosAplicados.motorista;\n    })\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"relatorio-container\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardsDashboard, {\n        estatisticas: estatisticasFiltradas\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Filtros, {\n        onFiltrar: handleFiltrar,\n        filtrosAtivos: filtrosAplicados\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ExportarRelatorios, {\n        dados: {\n          viagens: viagensFiltradas,\n          estatisticas: estatisticasFiltradas\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Graficos, {\n        viagens: viagensFiltradas,\n        estatisticas: estatisticasFiltradas\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabelaViagens, {\n        viagens: viagensFiltradas,\n        totalViagens: viagensFiltradas.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(RelatorioComponent, \"Go7BA7ryIw4cFFcgM4PG6ApcetQ=\", false, function () {\n  return [useSocket];\n});\n_c = RelatorioComponent;\nexport default RelatorioComponent;\nvar _c;\n$RefreshReg$(_c, \"RelatorioComponent\");","map":{"version":3,"names":["React","useState","useSocket","CardsDashboard","Filtros","Graficos","TabelaViagens","ExportarRelatorios","Header","jsxDEV","_jsxDEV","RelatorioComponent","_s","_dadosRelatorios$viag","dadosRelatorios","loading","socket","filtrosAplicados","setFiltrosAplicados","handleFiltrar","filtros","emit","className","children","role","fileName","_jsxFileName","lineNumber","columnNumber","estatisticas","viagensFiltradas","viagens","filter","viagem","_viagem$motorista","motorista","_id","estatisticasFiltradas","totalViagens","length","porMotorista","m","id","onFiltrar","filtrosAtivos","dados","_c","$RefreshReg$"],"sources":["D:/sistema-chamados/frontend/src/components/Relatorios/RelatorioComponent.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useSocket } from \"../../context/SocketContext\";\r\nimport CardsDashboard from \"./CardsDashboard\";\r\nimport Filtros from \"./Filtros.tsx\";\r\nimport Graficos from \"./Graficos\";\r\nimport TabelaViagens from \"./TabelaViagens\";\r\nimport ExportarRelatorios from \"./ExportarRelatorios\";\r\nimport Header from \"./Header.jsx\";\r\nimport \"../../styles/Relatorio/relatorio.css\";\r\n\r\nconst RelatorioComponent = () => {\r\n  const { dadosRelatorios, loading, socket } = useSocket();\r\n  const [filtrosAplicados, setFiltrosAplicados] = useState({});\r\n\r\n  const handleFiltrar = (filtros) => {\r\n    setFiltrosAplicados(filtros);\r\n    socket.emit(\"obterRelatorios\", filtros);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"text-center my-5\">\r\n        <div className=\"spinner-border text-primary\" role=\"status\">\r\n          <span className=\"visually-hidden\">Carregando...</span>\r\n        </div>\r\n        <p className=\"mt-2\">Carregando relatórios...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!dadosRelatorios || !dadosRelatorios.estatisticas) {\r\n    return (\r\n      <div className=\"alert alert-warning text-center\">\r\n        Nenhum dado encontrado com os filtros selecionados\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Filtra viagens por motorista se existir no filtro\r\n  const viagensFiltradas = dadosRelatorios.viagens?.filter(viagem => {\r\n    if (!filtrosAplicados.motorista) return true;\r\n    return viagem.motorista?._id === filtrosAplicados.motorista;\r\n  }) || [];\r\n\r\n  // Calcula estatísticas filtradas\r\n  const estatisticasFiltradas = {\r\n    ...dadosRelatorios.estatisticas,\r\n    totalViagens: viagensFiltradas.length,\r\n    porMotorista: dadosRelatorios.estatisticas.porMotorista.filter(m => {\r\n      if (!filtrosAplicados.motorista) return true;\r\n      return m._id === filtrosAplicados.motorista;\r\n    })\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <div id=\"relatorio-container\">\r\n        <Header />\r\n        \r\n        <CardsDashboard estatisticas={estatisticasFiltradas} />\r\n        \r\n        <Filtros \r\n          onFiltrar={handleFiltrar} \r\n          filtrosAtivos={filtrosAplicados}\r\n        />\r\n        \r\n        <ExportarRelatorios \r\n          dados={{ \r\n            viagens: viagensFiltradas, \r\n            estatisticas: estatisticasFiltradas \r\n          }} \r\n        />\r\n        \r\n        <Graficos \r\n          viagens={viagensFiltradas} \r\n          estatisticas={estatisticasFiltradas} \r\n        />\r\n        \r\n        <TabelaViagens \r\n          viagens={viagensFiltradas} \r\n          totalViagens={viagensFiltradas.length}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RelatorioComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}