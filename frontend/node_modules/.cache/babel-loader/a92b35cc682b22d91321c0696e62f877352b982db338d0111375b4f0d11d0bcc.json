{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import Chart from\"chart.js/auto\";import'../../styles/Relatorio/graficos.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Graficos=_ref=>{let{viagens=[],estatisticas={}}=_ref;const chartViagensRef=useRef(null);const chartMotoristasRef=useRef(null);const[charts,setCharts]=useState({viagens:null,motoristas:null});// Inicializa estatísticas vazias para evitar erros\nconst estatisticasSeguras={porMotorista:[],...estatisticas};useEffect(()=>{// Destrói gráficos existentes antes de criar novos\nif(charts.viagens)charts.viagens.destroy();if(charts.motoristas)charts.motoristas.destroy();if(viagens.length===0||!estatisticasSeguras.porMotorista)return;// Processa dados para gráfico de viagens por dia\nconst dadosPorDia=viagens.reduce((acc,viagem)=>{const data=new Date(viagem.saida).toLocaleDateString();acc[data]=(acc[data]||0)+1;return acc;},{});// Cria novo gráfico de viagens\nconst ctxViagens=chartViagensRef.current.getContext(\"2d\");const novoChartViagens=new Chart(ctxViagens,{type:\"line\",data:{labels:Object.keys(dadosPorDia),datasets:[{label:\"Viagens por Dia\",data:Object.values(dadosPorDia),borderColor:\"rgb(75, 188, 192)\"}]},options:{layout:{padding:20},plugins:{legend:{display:true,labels:{color:\"#ffffff\",// Cor dos rótulos do eixo X\nfont:{size:20// Tamanho da fonte dos rótulos do eixo X\n}}}},scales:{x:{ticks:{color:\"#ffffff\"// Cor branca para os rótulos do eixo X\n},grid:{color:\"rgba(128, 128, 128, 0.3)\"// Cor cinza translúcida para as linhas de grade\n}},y:{ticks:{color:\"#ffffff\"// Cor branca para os rótulos do eixo Y\n},grid:{color:\"rgba(128, 128, 128, 0.3)\"// Cor cinza translúcida para as linhas de grade\n}}}}});// Cria novo gráfico de motoristas\nconst ctxMotoristas=chartMotoristasRef.current.getContext(\"2d\");// Gera cores dinâmicas para cada motorista\nconst coresMotoristas=estatisticasSeguras.porMotorista.map(()=>{const r=Math.floor(Math.random()*256);const g=Math.floor(Math.random()*256);const b=Math.floor(Math.random()*256);return`rgb(${r}, ${g}, ${b})`;});const novoChartMotoristas=new Chart(ctxMotoristas,{type:\"bar\",data:{labels:estatisticasSeguras.porMotorista.map(e=>e.nome),datasets:[{label:\"Total de Viagens\",data:estatisticasSeguras.porMotorista.map(e=>e.total),backgroundColor:coresMotoristas}]},options:{layout:{padding:20},plugins:{legend:{display:true,labels:{color:\"#ffffff\",// Cor dos rótulos do eixo X\nfont:{size:20// Tamanho da fonte dos rótulos do eixo X\n}}}},scales:{x:{ticks:{color:\"#ffffff\"// Cor branca para os rótulos do eixo X\n},grid:{color:\"rgba(128, 128, 128, 0.3)\"// Cor cinza translúcida para as linhas de grade\n}},y:{ticks:{color:\"#ffffff\"// Cor branca para os rótulos do eixo Y\n},grid:{color:\"rgba(128, 128, 128, 0.3)\"// Cor cinza translúcida para as linhas de grade\n}}}}});setCharts({viagens:novoChartViagens,motoristas:novoChartMotoristas});// Limpeza ao desmontar\nreturn()=>{if(novoChartViagens)novoChartViagens.destroy();if(novoChartMotoristas)novoChartMotoristas.destroy();};},[viagens,estatisticasSeguras.porMotorista]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:chartViagensRef,className:\"grafico-viagens\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:chartMotoristasRef,className:\"grafico-motoristas\"})})]});};export default Graficos;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}