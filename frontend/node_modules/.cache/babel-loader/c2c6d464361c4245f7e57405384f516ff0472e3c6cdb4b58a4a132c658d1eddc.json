{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Navigate,Outlet}from\"react-router-dom\";import api from\"../utils/api\";import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=()=>{const[isAuthenticated,setIsAuthenticated]=useState(null);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const validateToken=async()=>{try{var _response$data;const token=localStorage.getItem(\"token\");console.log(\"Token recuperado do localStorage:\",token?`${token.substring(0,10)}...`:\"Nenhum token\");if(!token){console.warn(\"Nenhum token encontrado no localStorage\");setIsAuthenticated(false);setIsLoading(false);return;}console.log(\"Iniciando validação do token...\");const response=await api.get(\"/auth/validate\");console.log(\"Resposta da validação:\",{status:response.status,data:response.data});if(!((_response$data=response.data)!==null&&_response$data!==void 0&&_response$data.valid)){var _response$data2;throw new Error(((_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.message)||\"Token inválido\");}setIsAuthenticated(true);}catch(error){console.error(\"Erro na validação do token:\",error);localStorage.removeItem(\"token\");localStorage.removeItem(\"user\");setIsAuthenticated(false);}finally{setIsLoading(false);}};validateToken();},[]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Carregando...\"});}if(isAuthenticated===true)return/*#__PURE__*/_jsx(Outlet,{});if(isAuthenticated===false)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});return/*#__PURE__*/_jsx(\"div\",{children:\"Carregando...\"});};export default ProtectedRoute;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}